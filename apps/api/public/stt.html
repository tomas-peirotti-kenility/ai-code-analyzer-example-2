<!-- STT Module HTML -->
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h2 class="mb-4">Speech To Text</h2>

      <!-- Connection Status -->
      <div class="mb-3">
        Playground API Websocket status: <span id="connectionStatus"
                                               class="badge bg-secondary">Disconnected</span>
      </div>

      <!-- File Drop Zone -->
      <div id="dropZone" class="mb-4">
        <div class="py-4">
          <i class="bi bi-cloud-upload"></i>
          <h5>Drop your audio file here</h5>
          <p>or click to select file</p>
          <input type="file" id="fileInput" accept="audio/*" class="d-none">
        </div>
      </div>

      <!-- Current File Info and Audio Player -->
      <div id="fileInfo" class="mb-4 d-none">
        <div class="alert alert-info">
          <strong>Current File: </strong><span id="fileName">None</span>
          <button id="clearFile" class="btn btn-sm btn-outline-danger float-end">Clear</button>
        </div>
        <audio id="audioPlayer" controls class="audio-player">
          Your browser does not support the audio element.
        </audio>
      </div>

      <!-- STT Configuration -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">STT Configuration</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="provider" class="form-label">Provider</label>
              <select id="provider" class="form-select">
                <option value="DEEPGRAM" selected>Deepgram</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="model" class="form-label">Model</label>
              <select id="model" class="form-select">
                <option value="nova-2" selected>Nova 2</option>
                <option value="nova-3">Nova 3</option>
                <option value="nova">Nova</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="encoding" class="form-label">Encoding</label>
              <select id="encoding" class="form-select">
                <option value="PCM" selected>PCM</option>
                <option value="LINEAR16">Linear16</option>
                <option value="MULAW">MULAW</option>
                <option value="ULAW">ULAW</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="sampleRate" class="form-label">Sample Rate</label>
              <select id="sampleRate" class="form-select">
                <option value="16000" selected>16000</option>
                <option value="8000">8000</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="language" class="form-label">Language</label>
              <select id="language" class="form-select">
                <option value="en-US" selected>en-US</option>
              </select>
            </div>
            <div class="col-md-6 mb-3 d-flex align-items-center">
              <div class="form-check me-3">
                <input type="checkbox" id="detectLanguage" class="form-check-input" checked>
                <label class="form-check-label" for="detectLanguage">Detect Language</label>
              </div>
              <div class="form-check">
                <input type="checkbox" id="cleanNoise" class="form-check-input" checked>
                <label class="form-check-label" for="cleanNoise">Clean Noise</label>
              </div>
            </div>
          </div>
          <button id="transcribeBtn" class="btn btn-primary" disabled>
            Transcribe Audio
          </button>
        </div>
      </div>

      <!-- Transcription Box -->
      <div class="mb-3">
        <div class="d-flex justify-content-between align-items-center">
          <h5>Transcription</h5>
          <span id="startTime" class="elapsed-time"></span>
        </div>
        <div id="transcriptionBox" class="border">
          <div id="transcriptionContent"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Error Toast -->
<div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-danger text-white">
      <strong class="me-auto">Error</strong>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body" id="errorToastBody">
    </div>
  </div>
</div>